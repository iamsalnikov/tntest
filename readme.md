Это реализация тестового задания от компании из финансового сектора.

## Исходное задание

Текст задания был получен в следующем виде

> получение курсов, кроскурсов ЦБ.
> требование:
> - на входе: дата, код валюты, код базовой валюты (по-умолчанию RUR);
> - получать курсы с cbr.ru;
> - на выходе: значение курса и разница с предыдущим торговым днем;
> - кешировать данные cbr.ru.

## Решение

Задание решено с использованием PHP 7.4. Кеш складывается в memcache.

Для запуска unit-тестов можно выполнить команду:

```
make test
```

Для запуска и проверки решения можно воспользоваться командой:

```
make run
```

После запуска можно будет выполнять запросы на API.

### API

В API есть две ручки:

1. список валют
2. курс валюты за дату

#### Получение списка валют

Для получения списка валют нужно отправить запрос:

```
GET /currencies
```

В случае успеха придет ответ со статусом 200 и массивом валют. Структура валюты:
- `id` - строка, идентификатор валюты
- `name` - строка, название валюты
- `nominal` - целое число, номинал валюты

Пример ответа:

```
[
    {
        "id": "R01010",
        "name": "Австралийский доллар",
        "nominal": 1
    },
    {
        "id": "R01015",
        "name": "Австрийский шиллинг",
        "nominal": 1000
    }
]
```

#### Получение курса влюты за указанную дату

Для получения курса валюты за указанную дату нужно выполнить запрос:

```
GET /currencies/<CURRENCY_ID>/courses
```

На место `<CURRENCY_ID>` нужно подставить идентификатор валюты, курс которой получаем. Идентификатор валюты можно узнать из списка валют.

Экшен принимает несколько параметров:

- `date` - строка. **Обязательный параметр**. Дата, за которую получаем курс. Формат даты: `d.m.Y` (22.12.2020).
- `base` - строка. **Необязательный параметр**. Идентификатор базовой валюты для расчета курса.

В случае успеха придет ответ со статусом 200 и следующей структурой:
- `value` - вещественное число, значение курса
- `difference` - вещественное число, разница курса с предыдущим днем

Пример ответа:

```
{
    "value": 54.3849,
    "difference": -0.2021
}
```

Примеры запросов:

```
GET /currencies/R01010/courses?date=15.09.2020
GET /currencies/R01010/courses?date=22.09.2020&base=R01235
```

#### Ошибки

В случае возникновения какой-либо ошибки, придет ответ со статусом >= 400 и структурой:
- `message` - строка, сообщение об ошибке

Пример ответа:

```
{
    "message": "За указаную дату нет данных по курсу"
}
```

### Примечание к решению

- я не нашел календарь торговых дней, отчего вставил костыль, в котором мы получаем курсы за 30 дней
- с курсом валют работа идет с точностью до десятитысячных
- в версии, на которой будет все бежать, запущен xdebug (не стал отключать)